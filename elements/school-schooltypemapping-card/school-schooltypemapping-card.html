<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="..\..\bower_components/polymer/polymer.html">

<dom-module id="school-schooltypemapping-card">
  <template>
    <style>
      :host {
        display: block;
      }
           .innercard{
         @apply(--layout-horizontal);    
      margin-left:4.0em;
      width:70%
     }
      paper-checkbox.paper-checkbox-0
      {
      
         font-family: 'Roboto', 'Noto', sans-serif;
         -webkit-font-smoothing: antialiased;
         padding-left: 7px;
         padding-top: 15px;
     }

    </style>
    <div class="innercard">
           <paper-input value="{{schooltypename}}" hidden></paper-input>
           <paper-input value="{{schooltypeid}}" hidden></paper-input>
           <paper-input value="{{schoolid}}" hidden></paper-input>
          <paper-checkbox value="{{schooltypename}}" id="{{id}}" on-change="fnsetsection"></paper-checkbox>
 
    </div>
  </template>
  <script>
  (function() {
    'use strict';
     var schooltyearr=[];
     var schooltyedbarr=[];
     var schooltyedeletearr=[];
     //var schooltyedeletearr=[];
  var v=[];
    Polymer({
      is: 'school-schooltypemapping-card',

      masterschooltypecheking:function(arr){
          schooltyedbarr=arr;
          //alert(JSON.stringify(schooltyedbarr));
           for(var j=0;j<schooltyedbarr.length;j++){
              var schoolid=schooltyedbarr[j].school_id;
              var schooltypeid=schooltyedbarr[j].school_type_id;
              var schooltypes=schooltyedbarr[j].school_type_name;
              var schtypid=schooltyedbarr[j].school_id+schooltyedbarr[j].school_type_id;
            //  alert(schoolid)
               document.querySelector('#'+schtypid).checked=true;
                  if(document.querySelector('#'+schtypid).checked==true)
                  {
                    var obj={"schoolid":"","schooltypeid":"","schooltypename":""};
                    obj.schoolid=schoolid;
                    obj.schooltypeid=schooltypeid;
                    obj.schooltypename=schooltypes;
                    v.push(obj);
                   }
               }
             },
  Fngradeclean:function(e){
    //alert('1');
      for(var j=0;j<v.length;j++){
            var schooltypesplice=v[j].schoolid+v[j].schooltypeid;
            //alert(schooltypesplice);
             // document.querySelector('#'+schooltypesplice).checked=false;
               }
             v.splice(obj);
                var obj={"schoolid":"","schooltypeid":"","schooltypename":""};
                    obj.schoolid=this.schoolid;
                    obj.schooltypeid=this.schooltypeid;
                    obj.schooltypename=this.schooltypename;
                      schooltyearr.splice(obj);
                      schooltyedbarr.splice(obj);
                    },
           Fngradeclean1:function(e){
            //alert('ee');
               var obj={"schoolid":"","schooltypeid":"","schooltypename":""};
                    obj.schoolid=this.schoolid;
                    obj.schooltypeid=this.schooltypeid;
                    obj.schooltypename=this.schooltypename;
                    schooltyedeletearr.splice(obj);
                 
         //   schooltyedeletearr.splice(obj);
           
           },         
      fnsetsection:function(){
       //alert(this.id);
            if(document.querySelector('#'+this.id).checked==true)
            {
                  //alert(this.schoolid+this.schooltypeid+this.schooltypename);
                    var obj={"schoolid":"","schooltypeid":"","schooltypename":""};
                    obj.schoolid=this.schoolid;
                    obj.schooltypeid=this.schooltypeid;
                    obj.schooltypename=this.schooltypename;
                     schooltyearr.push(obj);
                     v.push(obj);
                    //alert(JSON.stringify(schooltyearr));
                      document.querySelector('master-school_type-creation').schooltypeinsert(schooltyearr); 
                       for(var j=0;j<schooltyedeletearr.length;j++){
                     if(schooltyedeletearr[j].schoolid+schooltyedeletearr[j].schooltypeid==this.id){
                          schooltyedeletearr.splice(j,1);}}}

            else if(document.querySelector('#'+this.id).checked==false){
                    var obj={"schoolid":"","schooltypeid":"","schooltypename":""};
                    obj.schoolid=this.schoolid;
                    obj.schooltypeid=this.schooltypeid;
                    obj.schooltypename=this.schooltypename;
                    schooltyedeletearr.push(obj);
                     //alert(JSON.stringify(schooltyedeletearr));
                    document.querySelector('master-school_type-creation').fnschooltypedeleted(schooltyedeletearr); 
            
                    for(var i=0;i<schooltyearr.length;i++){
                    if(schooltyearr[i].schoolid+schooltyearr[i].schooltypeid==this.id){
                     schooltyearr.splice(i,1);
                   }}
                 }
          }
      });
       
  })();
  </script>
</dom-module>
