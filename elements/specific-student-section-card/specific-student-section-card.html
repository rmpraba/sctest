<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="..\..\bower_components/polymer/polymer.html">

<dom-module id="specific-student-section-card">
  <template>
    <style>   
      :host {  
        display: block;
      }

       paper-checkbox.paper-checkbox-0
      {
       
         font-family: 'Roboto', 'Noto', sans-serif;
         -webkit-font-smoothing: antialiased;
         padding-top: 4px;
         padding-left: 36px;
      
     }
    </style>
          <paper-input hidden value={{studentname}}></paper-input>
          <paper-input  hidden value={{stugradeid}}></paper-input>
          <paper-input  hidden  value={{gender}}></paper-input>
          <paper-input  hidden  value={{dob}}></paper-input>
          <paper-input  hidden  value={{enqno}}></paper-input>
          <paper-input  hidden  value={{adminno1}}></paper-input>
          <paper-input  hidden  value={{classid}}></paper-input>
          <paper-input hidden  value={{sectionname}}></paper-input>
    <paper-checkbox  id="{{id}}" on-change="fnsudentsectionzzzz">
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</paper-checkbox>      

                   
  </template>
  <script>
  (function() {
    'use strict';
    var studsectionccarr=[];
    var getstudentpredetarr=[];
    var arr=[];
      var pmm=[];
      var s1;
      var c1; 
     
      
    Polymer({
      is: 'specific-student-section-card',

      fnsudentsectionzzzz:function(e)
      {
      // alert(this.id);
        //alert(this.classid);

                    
         if(document.querySelector('#'+this.id).checked==true)
        {

          var obj={"student_name":"","gender":"","dob":"","classid":"","grade_id":"","id":"","newclsiddd":"","enquiry_no":""}
          
          obj.newclsiddd=this.id;
          obj.id=this.enqno;
          obj.student_name=this.studentname;
          obj.enquiry_no=this.id;
          obj.gender=this.gender;
          obj.dob=this.dob;
          obj.classid=this.classid;
          obj.grade_id=this.stugradeid;
           
          //alert(JSON.stringify(obj));
          studsectionccarr.push(obj); 
         // alert(JSON.stringify(studsectionccarr));

          s1=this.id;
          c1=this.classid;
                 
          
        for(var i=0;i<studsectionccarr.length;i++)
        {
            //alert(studsectionccarr[i].id);
           //alert(this.enqno);

           if(studsectionccarr[i].id==this.enqno)
           {    
               // alert(studsectionccarr[i].classid);
               // alert(this.classid);
                   if(studsectionccarr[i].classid==this.classid)
                   {
                     var mm=studsectionccarr[i].enquiry_no;
                      document.querySelector('#'+mm).checked=true;
                     pmm.push(studsectionccarr[i].classid);
                    }
                  else if(studsectionccarr[i].classid!=this.classid)
                  {
                   // alert('t');
                    //alert(studsectionccarr[i].newclsiddd);
                    //alert(studsectionccarr[i].classid);
                    var ssszzz=studsectionccarr[i].newclsiddd;
                    var bb=studsectionccarr[i].classid;
                      document.querySelector('#'+ssszzz).checked=false;
                      var a1 = pmm.indexOf(bb);
                    for(var g=0;g<pmm.length;g++)
                    {
                      if(a1==g)
                      {
                          pmm.splice(a1,1);
                      }
                    }
                      studsectionccarr.splice(i,1);
                    }
                  }

                  }
                   document.querySelector('student-to-section-mapping-card').fnsetsetcion(studsectionccarr);
                }
      },


      getprevistudent:function(arr)
      {
        //alert('pre');
        getstudentpredetarr=arr;
        for(var i=0;i<getstudentpredetarr.length;i++)
        {
          var studentname=getstudentpredetarr[i].student_name;
          var dob=getstudentpredetarr[i].dob;
          var stuid=getstudentpredetarr[i].id;

          var gender=getstudentpredetarr[i].gender;
          var classid=getstudentpredetarr[i].class_id;
          var studentid=getstudentpredetarr[i].id;
              studentid=studentid.replace(/[^\w\s]/gi, '');
              //alert(studentid);

           var previousclsid=classid+studentid;
             //alert(previousclsid);

              document.querySelector('#'+previousclsid).checked=true;
              if(document.querySelector('#'+previousclsid).checked==true)
              {
                
                var obj1={"studentname":"","dob":"","gender":"","classid":"","id":"","gradeid":"","newclsiddd":""}

                    obj1.studentname=studentname;
                    obj1.gender=gender;
                    obj1.dob=dob;
                    obj1.id=stuid;
                    obj1.classid=classid; 
                    obj1.newclsiddd= previousclsid;
                    studsectionccarr.push(obj1);
                   // alert(JSON.stringify(studsectionccarr));
              }
        }
      },
      
      studentsectioncleanzzzz:function(e)
      {
        //alert(333);
    //alert(JSON.stringify(studsectionccarr));
    
        if(studsectionccarr.length!=0)
        {
            for(var i=0;i<studsectionccarr.length;i++)
            {
                //alert(studsectionccarr[i].newclsiddd);
                var idzzz=studsectionccarr[i].newclsiddd;
                //alert('call');
                //alert(idzzz);
                 document.querySelector('#'+idzzz).checked=false;
            }

               var obj={"studentname":"","gender":"","dob":"","adminno":"","classid":"","stugradeid":""};
                obj.studentname=this.studentname;
                obj.gender=this.gender;
                obj.dob=this.dob;
                obj.adminno=this.enqno;
                obj.classid=this.classid;
                obj.stugradeid=this.stugradeid;
                getstudentpredetarr.splice(obj);
                studsectionccarr.splice(obj);
        }

      }     
    });
  })();
  </script>
</dom-module>